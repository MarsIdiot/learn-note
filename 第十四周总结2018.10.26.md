## 第十四周总结2018.10.26

## 大致总结

### （一)本周学习内容：

   	 1.熟悉电子xx系统

​	 2.将周计划中没有完成的任务逐步完成，包括以下知识点：

​		1）搭建FTP服务

​		2）java 异常处理 Exception/Runtime/Error

​		3）java网络编程技术

​		4）ONGL表达式

   	3.其他

​		1）完善ppt内容，准备腹稿

### （二）问题与反思

​	在准备中期答辩的过程中发现很多问题：

​		1.内容上有些空洞，讲解技术时应当与业务相结合的方式，错误在于单独讲解SSM配置，如：讲解Spring运行流程时结合添加用户业务说明；

​		2.ppt只是提醒自己，不要照念，并且花费时间，提前准备好腹稿，做到思路清晰；

### （三）下周计划

​    	准备下周答辩，继续跟进项目，学习springBoot

## 学习笔记

### (一）搭建搭建FTP服务

#### 在windows本地

​	1.创建一个用户账户用于登录FTP

​	2.添加IIS程序服务（启动FTP服务与站点服务）

​	3.创建发布FTP站点

#### 在liunx系统

​	1.查看系统是否安装vsftpd服务，若无，则利于yum命令安装

​	2.创建ftp用户

​	3.编辑vsftpd.conf配置文件(修改保证不允许匿名用户登录)，保存

​	4.启动vsftp服务，查看ftp服务运行状态

​	5.利用ftp客户端进行连接（如：FileZilla，ip+用户名+密码）

​	 ————至此ftp服务部署完成，客户端可以正常上传下载————

​	6.存在的问题（权限控制）

​	问题：以上存在的问题是把系统上所有的目录都暴露给了客户端，虽客户端不能随意修改删除其余文件，但目录可见总归是有风险的。

​	解决：所以应该配置让ftp用户只能在自己的家目录下面活动，而无法查看系统其他目录。

​	具体配置：

​		配置vsftpd.conf文件

​		1）chroot_local_user=YES这个配置，默认是注释的，这里去掉注释，表示只让用户在自己的目录里面活动；

​		2)此时，可能会报错禁止运行在可写的家目录下，因为刚才ftp_test这个目录有w权限，而现在我们使用的vsftpd版本是属于比较新的版本（vsftpd版本3.0.2 ），为了安全性做了一些限制。如果我们去掉家目录的写权限，虽可连接，但是无法上传文件。

​		3）所以应当添加一行配置：allow_writeable_chroot=YES表示允许对家目录的写权限

​	————————————至此...————————————

​	现在可以看到上面的路径是一个/，对于ftp用户来说也就是根目录了，只能在这个目录下操作，而无法跳出这个目录

### (二）java 异常处理

#### 异常捕获机制 **try...catch...**finally

​	1.捕捉时按catch前后顺序进行，只有一个catch会被执行；

   	2.当catch中的异常存在父子继承关系，要保证父类异常在下面，子类异常在上面

​	3.在最后一个捕获中来捕获Exception，这样至少可以保证程序不会因为一个未捕获的异常导致中断。

#### 抛出异常有三种形式

##### 	1.系统自动抛异常

​		当程序语句出现一些逻辑错误、主义错误或类型转换错误时，系统会自动抛出异常

##### 	 2.throw

​		throw是语句抛出一个异常，一般是在代码块的内部，当程序出现某种逻辑错误时由程序员主动抛出某种特定类型的异常.如：throw new NumberFormatException(); 

##### 	 3.throws

​		throws是方法可能抛出异常的声明。(用在声明方法时，表示该方法可能要抛出异常)

​		public void function() throws Exception{......}

​		当某个方法可能会抛出某种异常时用于throws 声明可能抛出的异常，然后交给上层调用它的方法程序处理

##### 	4.throw与throws的比较

​		1）throws出现在方法函数头；而throw出现在函数体。
​		2）throws表示出现异常的一种可能性，并不一定会发生这些异常；throw则是抛出了异常，执行throw则一定抛出了某种异常对象。

​		3）两者都是消极处理异常的方式（这里的消极并不是说这种方式不好），只是抛出或者可能抛出异常，但是不会由函数去处理异常，真正的处理异常由函数的上层调用处理。

### (三）java 网络编程技术

#### 	基本概念

​	网络编程是指编写运行在多个设备（计算机）的程序，这些设备都通过网络连接起来。

​	java.net 包中 J2SE 的 API 包含有类和接口，它们提供低层次的通信细节。你可以直接使用这些类和接口，来专注于解决问题，而不用关注通信细节。

​	java.net 包中提供了两种常见的网络协议的支持：

- **TCP**：TCP 是传输控制协议的缩写，它保障了两个应用程序之间的可靠通信。通常用于互联网协议，被称 TCP / IP。

- **UDP**：UDP 是用户数据报协议的缩写，一个无连接的协议。提供了应用程序之间要发送的数据的数据包。

  Socket 编程：这是使用最广泛的网络概念，它已被解释地非常详细。

#### 	利用TCP协议实现步骤

以下步骤在两台计算机之间使用套接字建立TCP连接时会出现：

- 服务器实例化一个 ServerSocket 对象，表示通过服务器上的端口通信。
- 服务器调用 ServerSocket 类的 accept() 方法，该方法将一直等待，直到客户端连接到服务器上给定的端口。
- 服务器正在等待时，一个客户端实例化一个 Socket 对象，指定服务器名称和端口号来请求连接。
- Socket 类的构造函数试图将客户端连接到指定的服务器和端口号。如果通信被建立，则在客户端创建一个 Socket 对象能够与服务器进行通信。
- 在服务器端，accept() 方法返回服务器上一个新的 socket 引用，该 socket 连接到客户端的 socket

注：

​	1.连接未成功时，服务器端只有ServerSocket ；成功时会服务端创建一个Socket对象与客户端的Socket进行通信。

​	2.连接建立后，通过使用 I/O 流在进行通信，每一个socket都有一个输出流和一个输入流，客户端的输出流连接到服务器端的输入流，而客户端的输入流连接到服务器端的输出流。

​	3.TCP 是一个双向的通信协议，因此数据可以通过两个数据流在同一时间发送。

#### 利用UDP协议实现步骤

​	UDP协议（用户数据报协议）是无连接的、不可靠的、无序的,速度快

​       进行数据传输时，首先将要传输的数据定义成数据报（Datagram），大小限制在64k，在数据报中指明数据索要达到的Socket（主机地址和端口号），然后再将数据报发送出去

​       **DatagramPacket类:表示数据报包**

​       **DatagramSocket类：进行端到端通信的类**

​       1、服务器端实现步骤

​           ① 创建DatagramSocket，指定端口号

​           ② 创建DatagramPacket

​           ③ 接受客户端发送的数据信息

​           ④ 读取数据

​	2、客户端实现步骤

​           ① 定义发送信息

​           ② 创建DatagramPacket，包含将要发送的信息

​           ③ 创建DatagramSocket

​           ④ 发送数据

### （四）ONGL表达式

• OGNL是Object Graphic Navigation Language(对象图导航语言)的缩写，它是一种功能强大的表达式语言，使用它可以存取对象的任意属性，调用对象的方法，使用OGNL表达式的主要作用是简化访问对象中的属性值，Struts 2的<property>标签中使用的就是OGNL表达式。

• OGNL表达式的解析是围绕着OGNL上下文进行的， OGNL上下文是一个Map对象，其中可包含多个Java对象，其中有一个对象比较特殊，这个对象称为根对象。一个OGNL表达式如果没有显式指定目标对象，则默认从根对象中按照规则查找数据。

若要访问非根对象中的属性，则表达式需要使用#前缀

